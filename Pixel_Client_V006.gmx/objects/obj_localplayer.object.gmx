<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_shadow</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>-1</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>scr_startingStats();

instance_create(x, y, obj_localInteract);
instance_create(x, y, obj_chatLog);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>instance_destroy(obj_localInteract);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>state = "standing";
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(stunned &lt; 1)
    {
        scr_detectKey();
        //scr_groundCheck();
        //scr_jumpCheck();
        scr_rightCheck();
        scr_leftCheck();
        scr_downCheck();
        scr_upCheck();
        scr_collisionCheck();
        scr_standCheck();
        scr_useItem();
    }
else
    {
        stunned = stunned -1;
        state = "standing";
    }

scr_diaperSystem();
scr_debuff();
scr_scriptedMovement();

var view_xx = x-480;
view_xx = clamp(view_xx, min(0, room_width*0.5 - 480), max(room_width*0.5 - 480, room_width-960) );
view_xview[0] = view_xx;

var view_yy = y-270;
view_yy = clamp(view_yy,  min(0, room_height*0.5 - 270), max(room_height*0.5 - 270, room_height-540) );
view_yview[0] = view_yy;

/*
if(x &gt; 480 &amp;&amp; x &lt; room_width-480 || room_width &lt;= 960)  // rooms always have control
        {
            view_xview[0] = x-480;
                //if(room_width &lt;=960)
               //     {
                 //       view_xview[0] = (room_width *0.5) -480;
                 //   }
        }
    else
        {
            if(x &lt; 480)
                {
                    view_xview[0] = 0;
                }
            else
                {
                    view_xview[0] = room_width-960;
                }
        }

        
if(y &gt; 270 &amp;&amp; y &lt; room_height-270 || room_height &lt;= 540)  // rooms always have control
        {
            view_yview[0] = y-270;
             //   if(room_height &lt;= 540)
                //    {
                  //      view_yview[0] = (room_height *0.5) -270;
                  //  }
        }
    else
        {
            if(y &lt; 480)
                {
                    view_yview[0] = 0;
                }
            else
                {
                    view_yview[0] = room_height-540;
                }
        }

*/        
        
depth = -y;


var d = 0;
switch (dir)
{
    case "right":
        d = 1;
        break;
        
    case "left":
        d = 2;
        break;
        
    case "down":
        d = 3;
        break;
        
    case "up":
        d = 4;
        break;
}

//var roomname = room_get_name(room);

//update coordinates
buffer_seek(global.buffer, buffer_seek_start, 0);
buffer_write(global.buffer, buffer_u8, 7);
buffer_write(global.buffer, buffer_u32, global.playerId);
buffer_write(global.buffer, buffer_f32, x);
buffer_write(global.buffer, buffer_f32, y);
    //below might be too much each frame, try sending appearance updates less often
    buffer_write(global.buffer, buffer_u16, hairCustom);
    buffer_write(global.buffer, buffer_u16, outfitTopCustom);
        buffer_write(global.buffer, buffer_u16, outfitBottomCustom);
    buffer_write(global.buffer, buffer_u8, skinCustom);
    buffer_write(global.buffer, buffer_u16, diaperCustom);
    buffer_write(global.buffer, buffer_u32, global.skinCol);
    buffer_write(global.buffer, buffer_u32, global.hairCol);
    buffer_write(global.buffer, buffer_u32, global.outfitTopCol);
        buffer_write(global.buffer, buffer_u32, global.outfitBottomCol);
    buffer_write(global.buffer, buffer_u8, peeHold);
buffer_write(global.buffer, buffer_u8, frames);
buffer_write(global.buffer, buffer_u8, d);
buffer_write(global.buffer, buffer_u32, room);

network_send_packet(obClient.socket, global.buffer, buffer_tell(global.buffer));

// position the interaction ball (obj_localInteract) based on position
var xx = 0;
var yy = 0;

if(instance_exists(obj_localInteract))
    {
        switch (dir)
            {
                case "right":
                    xx = 35;
                    break;
                    
                case "left":
                    xx = -35;
                    break;
                    
                case "down":
                    yy = 25;
                    break;
                    
                case "up":
                    yy = -25;
                    break;
            }
        obj_localInteract.x = x + xx;
        obj_localInteract.y = y + yy;
    }
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///check inventory key

if (keyboard_check(vk_tab) || gamepad_button_check(0, gp_start) )
    {
        if(inventory_open == -1)
            if(stunned &lt; 1)
                {
                    inventory_open = 2;
                    instance_create(x,y,obj_inventorySelect);
                }
        if(inventory_open == 1)
            inventory_open = -2;
    }
    else
        {
            if(inventory_open == -2)
                inventory_open = -1;
            if(inventory_open == 2)
                inventory_open = 1;
        }

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>x = respawnxx;
y = respawnyy;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Diaper meter draw


var tempIMG = floor((pee / maxPee) * 150);
draw_sprite_ext(spr_peeGUI, tempIMG, 10, 10, image_xscale, image_yscale, 0, image_blend, 0.5);
//- draw_sprite_ext(spr_actionButton, global.controlType, window_get_width() - 200, 10, image_xscale, image_yscale, 0, image_blend, 0.5);
draw_sprite_ext(spr_actionButton, global.controlType, surface_get_width(application_surface) - 200, 10, image_xscale, image_yscale, 0, image_blend, 0.5);





if (global.devControls &gt; 9)
    {
    
    draw_text(10, 10, "Pee: " + string(pee));
    draw_text(10, 40, "MaxPee: " + string(maxPee));
    var sw_xx = surface_get_width(application_surface);
    draw_text(10, 80, string(sw_xx));
    
    }
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Inventory draw

if(inventory_open &gt; 0)
    {
        draw_sprite_ext(spr_inventory_panel,0, surface_get_width(application_surface) *0.5, surface_get_height(application_surface) *0.5, 1, 1, 0, image_blend, 1);
    }



/*-   cool code, but useless now
if(inventory_open &gt; 0)
    {
        draw_set_colour(c_ltgray);
        draw_set_alpha(0.5);
        draw_rectangle(window_get_width() -430, window_get_height() -430, window_get_width() -51, window_get_height() -51, false);
    
        var i;
        for (i = 0; i &lt; 25; i += 1)
            {
                var count5 = floor(i*0.2);
                var xx = i -5*count5;

                draw_sprite_ext(spr_inventory_block,0, window_get_width() -100 -70*xx, window_get_height() -100 -70*count5, 1, 1, 0, image_blend, 1);
            }
    }
*/
    
//if (keyboard_check(ord("P")))
//above is from Tut, but I wanted Tab instead

if(!global.typing)
{
    if (keyboard_check(vk_home))
    {
        if (!instance_exists(obj_playerList))
        {
            instance_create(x, y, obj_playerList);
        }
    }
    else
    {
        if (instance_exists(obj_playerList))
        {
            with(obj_playerList)
            {
                instance_destroy();
            }
        }
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/*-
var xx = 0;
var yy = 0;

if(xspd&gt;0) { xx = xspd; }
    else { xx = -xspd; }
if(yspd&gt;0) { yy = yspd; }
    else { yy = -yspd; }

if(xx&gt;yy) { animSpeed += xx; }
    else { animSpeed += yy; }
*/
    

if(animSpeed &lt; 8 ) { frames = 0; }    
    if(animSpeed &gt; 7) { frames = 1; }
    if(animSpeed &gt; 15) { frames = 0; }
    if(animSpeed &gt;23) { frames = 2; }
        
if(state != "standing")
    {
        animSpeed++;
        if(state == "running")
            {
                animSpeed++;
            }
        if (state2 == 0)  //create event, makes stutter steps animate more
            {
                animSpeed = animSpeed +2;
                state2 = 1;
            }
    }
else 
    {
        if(frames != 0)
            animSpeed++;
        
        state2 = 0;
    }
    
if(animSpeed &gt;= 31) { animSpeed = 0; }


//=============================================================================
scr_face_emotes(); //inside avatar 2
scr_avatar_2();

scr_is_typing();

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="123">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (global.devControls &gt; 9)
{

    diaperCustom = diaperCustom + 1;

}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="122">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (global.devControls &gt; 9)
{

pee = pee +1000;

}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="36">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (global.devControls &gt; 9)
{

    x = mouse_x;
    y = mouse_y;

}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="34">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (global.devControls &gt; 9)
{
    if room_next(room) != -1
       {
       room_goto(room_next(room));
       }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="33">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (global.devControls &gt; 9)
{
    if room_previous(room) != -1
       {
       room_goto(room_previous(room));
       }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="27">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///tell the server we're leaving the game room


//destroys any remote players to prevent callbacks
with (obj_remoteplayer)
   {
    instance_destroy();
   }

buffer_seek(global.buffer, buffer_seek_start, 0);//seek to the beginning of the read buffer
buffer_write(global.buffer, buffer_u8, 6);//write a tag to the global write buffer
buffer_write(global.buffer, buffer_u32, global.playerId);
buffer_write(global.buffer, buffer_u8, global.playerType);
buffer_write(global.buffer, buffer_u8, 0);
network_send_packet(obClient.socket, global.buffer, buffer_tell(global.buffer));

global.typing = false;
global.inGame = 0;

room_goto(rm_characterLoad);

//audio_stop_sound(snd_house);
audio_stop_all();
audio_play_sound(snd_lobby, 10, true);

instance_destroy();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="17">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///old throwing code for platformers

/*

if (state = "standing" &amp;&amp; !jumping &amp;&amp; !falling)
{
    state = "throwing"
    alarm[0] = room_speed * 0.25;
    
    var xx = x;
    var yy = y - 10;
    
    if (dir == "right")
    {
        xx = x + 26;        
    }
    else
    {
        xx = x - 26;
    }
    
    var proj = instance_create(xx, yy, obj_projectile);
    proj.speed = 8;
    if ( dir == "right")
        {
        proj.direction = 0;
        }
    else
        {
        proj.direction = 180;
        }
    proj.owner = global.playerId;
    projectileCount++;
    proj.projectileId = projectileCount;
    
    
    buffer_seek(global.buffer, buffer_seek_start, 0);
    buffer_write(global.buffer, buffer_u8, 11);
    buffer_write(global.buffer, buffer_u32, global.playerId);
    buffer_write(global.buffer, buffer_u32, projectileCount);
    buffer_write(global.buffer, buffer_f32, xx);
    buffer_write(global.buffer, buffer_f32, yy);
    network_send_packet(obClient.socket, global.buffer, buffer_tell(global.buffer));
}

*/
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
